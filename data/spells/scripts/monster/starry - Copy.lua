local combat = {}

    for i = 1, 6 do
        combat[i] = Combat()
        combat[i]:setParameter(COMBAT_PARAM_TYPE, COMBAT_PHYSICALDAMAGE)
        combat[i]:setParameter(COMBAT_PARAM_EFFECT, CONST_ME_GIANTICE)
        combat[i]:setFormula(COMBAT_FORMULA_LEVELMAGIC, -2.0, -100, -1.6, -100)
    end


    local area = {
        {
			{0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0},
			{0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0},
			{0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0},
			{0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0},
			{0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0},
			{0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
			{1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
			{0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
			{0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0}
        },
        {
            {0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
			{0, 0, 0, 1, 1, 0, 0, 0, 0, 1},
			{0, 0, 0, 1, 1, 0, 0, 1, 1, 1},
			{0, 0, 0, 1, 1, 1, 1, 1, 1, 0},
			{0, 0, 1, 1, 1, 1, 1, 1, 1, 0},
			{1, 1, 1, 1, 1, 2, 1, 1, 0, 0},
			{0, 0, 1, 1, 1, 1, 1, 1, 1, 0},
			{0, 0, 0, 1, 1, 1, 1, 1, 1, 0},
			{0, 0, 0, 1, 1, 0, 0, 1, 1, 1},
			{0, 0, 0, 1, 1, 0, 0, 0, 0, 1},
			{0, 0, 0, 1, 0, 0, 0, 0, 0, 0}
        },
        {
            {0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0},
			{0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0},
			{0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0}
        },
        {
            {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0},
			{0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0},
			{0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
			{1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
			{0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
			{0, 0, 0, 1, 1, 2, 1, 1, 0, 0, 0},
			{0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0},
			{0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0},
			{0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0},
			{0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0}
        },
        {
            {0, 0, 0, 0, 0, 0, 1, 0, 0, 0},
			{1, 0, 0, 0, 0, 1, 1, 0, 0, 0},
			{1, 1, 1, 0, 0, 1, 1, 0, 0, 0},
			{0, 1, 1, 1, 1, 1, 1, 0, 0, 0},
			{0, 1, 1, 1, 1, 1, 1, 1, 0, 0},
			{0, 0, 1, 1, 2, 1, 1, 1, 1, 1},
			{0, 1, 1, 1, 1, 1, 1, 1, 0, 0},
			{0, 1, 1, 1, 1, 1, 1, 0, 0, 0},
			{1, 1, 1, 0, 0, 1, 1, 0, 0, 0},
			{1, 0, 0, 0, 0, 1, 1, 0, 0, 0},
			{0, 0, 0, 0, 0, 0, 1, 0, 0, 0}
        },
        {
            {0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0},
			{0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
			{0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0},
			{0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0}
        } 
    }
 
    for x, _ in ipairs(area) do
        combat[x]:setArea(createCombatArea(area[x]))
    end

     function executeCombat(p, i)
        if not p.player then
            return false
        end
        if not p.player:isPlayer() then
             return false
        end
        p.combat[i]:execute(p.player, p.var)
    end

   function onCastSpell(player, var)
     local p = {player = player, var = var, combat = combat}
     local time_ = {1, 400, 800, 1200, 1600, 2000}
     for t, _ in ipairs(time_) do
         addEvent(executeCombat, time_[t], p, t)
     end
     return true
end
